"use strict";function loadImages(n,t){var f={targetX:t.width/2-50,targetY:15,targetSize:10,speed:3,fired:!1,clear:!0,ballX:0,ballY:0,ballXSpeed:0,ballYSpeed:0,ballRate:6,ballSpin:0,theme:0,ballSize:5,ammo:10,score:0,dashLength:7,dashSpace:10,drawDashes:!0},r,i,u;for(t.addEventListener("click",function(){f.fired=!0}),r=[],i=0;i<themes.length;i++)u="images/".concat(themes[i],"/",themes[i]),r.push([]),r[i][0]=new Image,r[i][0].offset=offsets[i]*Math.PI/180,r[i][0].ballOffset=r[0][0].offset-.5,r[i][0].src=u.concat("0.png"),r[i][1]=new Image,r[i][1].src=u.concat("1.png"),r[i][2]=new Image,r[i][2].src=u.concat("2.png"),r[i][3]=new Image,r[i][3].path=u.concat("3.png"),audio.push(new Audio("audio/".concat(themes[i],".mp3")));loadOptions(f,r);animated(r,n,t,f)}function loadOptions(n,t){var u,i,f,e,o,s,h,c,l,a,v,y,p,w,b,k,r,d,g,nt;for($("#body").css("background-color",colors[n.theme]),$("#myCanvas").css("background-image",'url("../'.concat(urlpath,t[n.theme][3].path,'")')),$(".info-part").css("background-color",shadeColor2(colors[n.theme],-.5)),u=$("#theme"),i=0;i<themes.length;i++)f=$("<option><\/option>").text(themes[i]),f.attr("data-val",i),u.append(f);u.change(function(){n.theme=parseInt($(this).find("option:selected").attr("data-val"));$("#body").css("background-color",colors[n.theme]);$("#myCanvas").css("background-image",'url("../'.concat(urlpath,t[n.theme][3].path,'")'));$(".info-part").css("background-color",shadeColor2(colors[n.theme],-.5))});e=document.getElementById("bSpeedText");o=document.getElementById("bSpeed");e.innerHTML=n.ballRate;o.value=n.ballRate;o.oninput=function(){e.innerHTML=this.value;n.ballRate=this.value};s=document.getElementById("bSizeText");h=document.getElementById("bSize");s.innerHTML=n.ballSize;h.value=n.ballSize;h.oninput=function(){s.innerHTML=this.value;n.ballSize=this.value};c=document.getElementById("tSpeedText");l=document.getElementById("tSpeed");c.innerHTML=n.speed;l.value=n.speed;l.oninput=function(){c.innerHTML=this.value;n.speed=n.speed>0?1*this.value:-1*this.value};a=document.getElementById("tSizeText");v=document.getElementById("tSize");a.innerHTML=n.targetSize;v.value=n.targetSize;v.oninput=function(){a.innerHTML=this.value;n.targetSize=this.value};y=document.getElementById("drawDashes");y.checked=n.drawDashes;y.oninput=function(){n.drawDashes=this.checked};p=document.getElementById("dashLengthText");w=document.getElementById("dashLength");p.innerHTML=n.dashLength;w.value=n.dashLength;w.oninput=function(){p.innerHTML=this.value;n.dashLength=this.value};b=document.getElementById("dashSpaceText");k=document.getElementById("dashSpace");b.innerHTML=n.dashSpace;k.value=n.dashSpace;k.oninput=function(){b.innerHTML=this.value;n.dashSpace=this.value};r=document.getElementById("readyFire");r.innerHTML="Click to Start";r.innerHTML=window.location.href.concat("   :::   ",urlpath);r.style.backgroundColor="green";d=document.getElementsByClassName("close")[0];d.onclick=function(){$("#alert").css("display","none")};g=document.getElementById("ammo");nt=document.getElementById("score");$("#reset-button").click(function(){reset(n)});g.innerHTML=n.ammo;nt.innerHTML=n.score}function animated(n,t,i,r){var e=100,f=10*r.targetSize,u=10*r.ballSize,o=getAngleRad(mousePos.x,mousePos.y,i.width/2,i.height-e/2),c,h,l,s;if(t.clearRect(0,0,i.width,i.height),i.width=i.clientWidth,t.save(),t.translate(i.width/2,i.height-e/2),t.rotate(n[r.theme][0].offset+o),t.drawImage(n[r.theme][0],-(e/2),-(e/2),e,e),t.restore(),t.drawImage(n[r.theme][1],r.targetX,r.targetY,f,f),r.targetX+=r.speed,r.targetX+f>i.width?r.speed>0?r.speed=-r.speed:r.targetX=i.width-f:r.targetX<0&&(r.speed<0?r.speed=-r.speed:r.targetX=0+f),r.drawDashes&&(t.save(),t.beginPath(),t.moveTo(i.width/2+50*Math.cos(o+n[0][0].ballOffset),i.height-e/2+50*Math.sin(o+n[0][0].ballOffset)),t.lineTo(mousePos.x,mousePos.y),t.setLineDash([r.dashLength,r.dashSpace]),t.strokeStyle="#FF0000",t.stroke(),t.restore()),r.fired){c=!1;r.clear?(audio[r.theme].play(),$("#optionsRow .tgl").prop("disabled",!0),s=document.getElementById("readyFire"),s.innerHTML="Reloading...",s.style.backgroundColor="red",r.clear=!1,r.ammo--,document.getElementById("ammo").innerHTML=r.ammo,h=0,r.theme==5&&(h=Math.random()*180),l=100+(r.ballSize-10)*5,r.ballX=i.width/2-u/2+l*Math.cos(o+n[0][0].ballOffset+h),r.ballY=i.height-l+l*Math.sin(o+n[0][0].ballOffset+h),r.ballXSpeed=r.ballRate*Math.cos(o+n[r.theme][0].ballOffset+h),r.ballYSpeed=r.ballRate*Math.sin(o+n[r.theme][0].ballOffset+h)):(r.ballX+=r.ballXSpeed,r.ballY+=r.ballYSpeed);t.save();t.translate(r.ballX+u/2,r.ballY+u/2);t.rotate(r.ballSpin);r.ballSpin+=.2;t.drawImage(n[r.theme][2],-u/2,-u/2,u,u);t.restore();var y=r.ballX+u/2,p=r.ballY+u/2,w=r.targetX+f/2,b=r.targetY+f/2,a=w-y,v=b-p,k=Math.sqrt(a*a+v*v)+1.4*r.ballSize/9;k<(u+f)/2&&(c=!0,r.score++,document.getElementById("score").innerHTML=r.score);(r.ballX<-u||r.ballX>i.width||r.ballY<-u||r.ballY>i.height)&&(r.fired=!1,r.clear=!0);(r.ballX<-u||r.ballX>i.width||r.ballY<-u||r.ballY>i.height)&&(c=!0);c&&(r.ammo==0?reset(r,!0):(r.fired=!1,r.clear=!0,s=document.getElementById("readyFire"),s.innerHTML="Ready to Fire",s.style.backgroundColor="green"))}requestAnimFrame(function(){animated(n,t,i,r)})}function reset(n,t){var i;if(t){var f=$("#alert"),e=$(".modal-header"),r=$(".modal-body"),o=$(".modal-footer"),u=shadeColor2(colors[n.theme],-.2);f.css("display","block");e.css("background-color",u);r.css("background-color",colors[n.theme]);r.children().html("Final Score: ".concat(n.score));o.css("background-color",u)}n.fired=!1;n.clear=!0;n.ammo=10;n.score=0;document.getElementById("score").innerHTML=n.score;document.getElementById("ammo").innerHTML=n.ammo;$("#optionsRow .tgl").prop("disabled",!1);i=document.getElementById("readyFire");i.innerHTML="Click to Start";i.style.backgroundColor="green"}function getAngleRad(n,t,i,r){var u;return t<r?(u=Math.atan((t-r)/(n-i)),u<0&&(u=Math.PI+u)):(u=-Math.atan((r-t)/(n-i)),u>0?u-=Math.PI:u==0&&n>i&&(u=Math.PI)),u}function shadeColor2(n,t){var i=parseInt(n.slice(1),16),r=t<0?0:255,u=t<0?t*-1:t,f=i>>16,e=i>>8&255,o=i&255;return"#"+(16777216+(Math.round((r-f)*u)+f)*65536+(Math.round((r-e)*u)+e)*256+(Math.round((r-o)*u)+o)).toString(16).slice(1)}window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}();var urlpath=window.location.pathname,mousePos={x:0,y:0},themes=["Default","Kirby","Mario","Pokemon","Duck Hunt","Stormtrooper","Metroid"],offsets=[-152,210,175,185,-135,180,-180],colors=["#689faf","#1e3834","#33c5cb","#769e8d","#62aeb1","#403d3a","#242a2f"],audio=[];window.onload=function(){var n=document.getElementById("myCanvas"),t=n.getContext("2d");n.width=n.clientWidth;n.height=n.clientHeight;t.imageSmoothingEnabled=!1;n.addEventListener("mousemove",function(n){mousePos={x:n.offsetX,y:n.offsetY}},!1);loadImages(t,n)};